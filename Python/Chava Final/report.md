# Final Project Report

## Files Organization

### Python files

+ `download.py` Download files from edgar and save them in the `data` sub-directory
+ `CRSP_COMP.sas` Generate cusip-cik links in CRSP database and get data needed from COMP database 
+ `CIK_CUSIP.py` Link cik to cusip for downloaded files
+ `cal_car_cav.py` Calculate CAR and CAV
+ `rudi_sentiment.py` Generate Rudimentary Sentiment Analysis measures
+ `adv_sentiment.py` Generate Advanced Sentiment Analysis measures
+ `analyze.py` Event studies, descriptive statistics, quintile analysis
  
### Directory

+ `out` results directory
+ `data` downloaded data from EDGAR

## Event Studies



### Desriptive Statistics for CAR and CAV

|        | mean      | std       | median   | q25       | q75      | min         | max       |
|--------|-----------|-----------|----------|-----------|----------|-------------|-----------|
| CAR_w0 | -0.0010 | 0.0614  | 0.0000 | -0.0135 | 0.0116 | -0.7454   | 0.8368  |
| CAR_w1 | 0.0002  | 0.1012  | 0.0000 | -0.0233 | 0.0195 | -0.8914   | 2.6018  |
| CAR_w3 | 0.0002  | 0.1189  | 0.0000 | -0.0322 | 0.0282 | -1.1389   | 2.5616  |
| CAR_w5 | -0.0007 | 0.1300  | 0.0000 | -0.0374 | 0.0340 | -1.1643   | 2.6545  |
| CAV_w0 | 0.4595  | 2.4240  | 0.2067 | -0.3439 | 1.1354 | -148.8035 | 10.2614 |
| CAV_w1 | 0.9999  | 4.7756  | 0.4263 | -0.7161 | 2.4743 | -282.4383 | 20.8736 |
| CAV_w3 | 1.3095  | 9.5762  | 0.4761 | -1.3224 | 3.7974 | -641.2574 | 33.4198 |
| CAV_w5 | 1.6077  | 12.3108 | 0.5714 | -1.9211 | 5.0043 | -817.3195 | 43.4115 |

### Distributions of CAR and CAV

<img src='./out/pic/car_w0.png'>

<img src='./out/pic/car_w1.png'>

<img src='./out/pic/car_w3.png'>

<img src='./out/pic/car_w5.png'>

<img src='./out/pic/cav_w0.png'>

<img src='./out/pic/cav_w1.png'>

<img src='./out/pic/cav_w3.png'>

<img src='./out/pic/cav_w5.png'>


## Rudimentary Sentiment Analysis

Rank the rudimentary measure into quintiles, take the mean of the CAR in different years as example.


|      | q1                   | q2                    | q3                  | q4                  | q5                 | q6                   | q7                  | q8                  | q9                   | q10                 |
|------|----------------------|-----------------------|---------------------|---------------------|--------------------|----------------------|---------------------|---------------------|----------------------|---------------------|
| 1995 | -1.057  | 0.873    | 1.726  | 0.304  | 1.287 | 1.139   | 2.073  | 2.338  | 1.289    | 1.193  |
| 1996 | -0.342  | 1.583    | 3.672   | -0.734 | 0.765 | 2.335   | 2.113   | 0.500  | -0.293 | 0.823  |
| 1997 | -0.663  | 1.575    | 0.163 | 1.835  | 0.471 | 0.536   | -0.672  | 1.652  | -0.016 | 2.188  |
| 1998 | -1.679  | 2.696    | -46.258  | 1.284  | 1.087 | 1.125    | -0.316 | 0.356  | -0.446  | 1.470  |
| 1999 | 4.976    | 2.291    | 0.637   | 1.830  | 2.102 | 0.458   | -0.366 | 0.636  | 2.444    | 2.685   |
| 2000 | 0.202  | -0.753   | 3.172  | -0.619 | 0.274 | 1.565   | 0.762  | -1.939 | 1.196   | 2.614   |
| 2001 | -0.722  | 2.260     | 0.277  | 1.599  | 0.604 | 1.989   | -0.348 | 2.080   | 0.915    | -0.886 |
| 2002 | -0.044 | -0.072  | 2.277  | 5.238  | 1.712 | 2.023    | 1.542  | 0.982  | -0.865  | 1.403   |
| 2003 | 0.670   | 2.278     | 0.367  | 3.500  | 0.707 | 0.767    | 1.980  | 0.100 | 1.914   | 2.044  |
| 2004 | 1.667   | 2.599     | 1.367   | 2.102  | 1.812 | 1.783   | 1.123   | 2.140  | 1.220   | 0.188  |
| 2005 | 0.852   | 1.190    | -0.549 | 0.142   | 1.962 | 0.017 | 3.123   | 3.133   | 2.845    | 0.981  |
| 2006 | 2.432   | 4.804     | 2.001  | 1.053   | 1.260 | 0.750   | 1.889  | 1.378  | 2.643   | 0.972  |
| 2007 | 3.317    | 3.294     | 2.092  | 2.195    | 2.335 | 1.298   | 1.428  | 5.384   | 2.684   | 0.871  |
| 2008 | 3.792   | 1.230     | 0.836  | 0.156 | 0.714 | 0.100  | 3.396  | 2.405   | 0.060  | 1.711  |
| 2009 | 2.686    | -0.052 | 2.553  | 2.094  | 1.472 | 4.580   | 1.175  | 1.457   | 1.149   | 0.450  |
| 2010 | 1.381   | 1.559    | 2.635   | 2.238   | 1.436 | 2.280   | 1.948   | 0.540  | 2.060   | 1.077  |
| 2011 | 3.312   | 1.260    | 2.223   | 0.626  | 2.642   | 0.885   | 0.593  | 3.112   | 2.756    | 2.170  |
| 2012 | 1.085   | 4.539    | 1.237  | 2.993  | 1.162  | 0.872   | 1.099   | 2.417   | 0.908   | 2.191  |
| 2013 | 1.065    | 1.780       | 0.603  | 0.732  | 3.845  | 2.371    | 2.242  | 2.653   | 0.855   | 1.926  |
| 2014 | 3.416    | 3.411     | 0.749  | 2.711  | 4.102  | 3.565   | 0.252  | 2.793  | 0.354  | 1.863  |
| 2015 | 2.108    | 5.980     | 1.373  | 2.413  | 2.284 | 2.429   | 2.472  | 2.433   | 2.025    | 2.912  |
| 2016 | 0.488  | 1.534    | 1.957  | 1.247   | 3.062  | 4.378    | -0.549 | 1.434  | 3.521   | 0.545  |
| 2017 | 4.618   | 2.778    | 2.292   | 2.094   | 5.283 | 6.122    | 1.324   | 1.426  | 3.672   | 0.991  |
| 2018 | 1.867   | 0.680    | 0.619  | 4.920   | 3.904 | 4.245    | -0.667 | 4.043   | 2.886   | 1.233   |

As we can see, in most of thr years the mean of Q10 metrics is larger than mean of Q1 metrics. which implies that positive sentiments can predict positive returns in the future. More precisily, 
The mean of each quantiles over the years are, 
,q1 =               0.001
,q2 =              -0.002
,q3 =              -0.001
,q4 =              -0.002
,q5 =              -0.001
,q6 =              -0.005
,q7 =               0.003
,q8 =              -0.012
,q9 =               0.002
,q10 =              0.011

which shows that, the mean of quantiles from Q1 to Q10 cumulative abnormal returns are nearly increasing.

Rank the rudimentary measure into quintiles, take the mean of the CAV in different years as example.

|      | q1                   | q2                    | q3                  | q4                  | q5                 | q6                   | q7                  | q8                  | q9                   | q10                 |
|------|----------------------|-----------------------|---------------------|---------------------|--------------------|----------------------|---------------------|---------------------|----------------------|---------------------|
| 1995 | -1.057  | 0.873    | 1.726  | 0.304  | 1.287 | 1.139   | 2.073  | 2.338  | 1.289    | 1.193  |
| 1996 | -0.342  | 1.583    | 3.672   | -0.734 | 0.765 | 2.335   | 2.113   | 0.500  | -0.293 | 0.823  |
| 1997 | -0.663  | 1.575    | 0.163 | 1.835  | 0.471 | 0.536   | -0.672  | 1.652  | -0.016 | 2.188  |
| 1998 | -1.679  | 2.696    | -46.258  | 1.284  | 1.087 | 1.125    | -0.316 | 0.356  | -0.446  | 1.470  |
| 1999 | 4.976    | 2.291    | 0.637   | 1.830  | 2.102 | 0.458   | -0.366 | 0.636  | 2.444    | 2.685   |
| 2000 | 0.202  | -0.753   | 3.172  | -0.619 | 0.274 | 1.565   | 0.762  | -1.939 | 1.196   | 2.614   |
| 2001 | -0.722  | 2.260     | 0.277  | 1.599  | 0.604 | 1.989   | -0.348 | 2.080   | 0.915    | -0.886 |
| 2002 | -0.044 | -0.072  | 2.277  | 5.238  | 1.712 | 2.023    | 1.542  | 0.982  | -0.865  | 1.403   |
| 2003 | 0.670   | 2.278     | 0.367  | 3.500  | 0.707 | 0.767    | 1.980  | 0.100 | 1.914   | 2.044  |
| 2004 | 1.667   | 2.599     | 1.367   | 2.102  | 1.812 | 1.783   | 1.123   | 2.140  | 1.220   | 0.188  |
| 2005 | 0.852   | 1.190    | -0.549 | 0.142   | 1.962 | 0.017 | 3.123   | 3.133   | 2.845    | 0.981  |
| 2006 | 2.432   | 4.804     | 2.001  | 1.053   | 1.260 | 0.750   | 1.889  | 1.378  | 2.643   | 0.972  |
| 2007 | 3.317    | 3.294     | 2.092  | 2.195    | 2.335 | 1.298   | 1.428  | 5.384   | 2.684   | 0.871  |
| 2008 | 3.792   | 1.230     | 0.836  | 0.156 | 0.714 | 0.100  | 3.396  | 2.405   | 0.060  | 1.711  |
| 2009 | 2.686    | -0.052 | 2.553  | 2.094  | 1.472 | 4.580   | 1.175  | 1.457   | 1.149   | 0.450  |
| 2010 | 1.381   | 1.559    | 2.635   | 2.238   | 1.436 | 2.280   | 1.948   | 0.540  | 2.060   | 1.077  |
| 2011 | 3.312   | 1.260    | 2.223   | 0.626  | 2.642   | 0.885   | 0.593  | 3.112   | 2.756    | 2.170  |
| 2012 | 1.085   | 4.539    | 1.237  | 2.993  | 1.162  | 0.872   | 1.099   | 2.417   | 0.908   | 2.191  |
| 2013 | 1.065    | 1.780       | 0.603  | 0.732  | 3.845  | 2.371    | 2.242  | 2.653   | 0.855   | 1.926  |
| 2014 | 3.416    | 3.411     | 0.749  | 2.711  | 4.102  | 3.565   | 0.252  | 2.793  | 0.354  | 1.863  |
| 2015 | 2.108    | 5.980     | 1.373  | 2.413  | 2.284 | 2.429   | 2.472  | 2.433   | 2.025    | 2.912  |
| 2016 | 0.488  | 1.534    | 1.957  | 1.247   | 3.062  | 4.378    | -0.549 | 1.434  | 3.521   | 0.545  |
| 2017 | 4.618   | 2.778    | 2.292   | 2.094   | 5.283 | 6.122    | 1.324   | 1.426  | 3.672   | 0.991  |
| 2018 | 1.867   | 0.680    | 0.619  | 4.920   | 3.904 | 4.245    | -0.667 | 4.043   | 2.886   | 1.233   |

More precisily, 
The mean of each quantiles over the years are, 
,q1 =               1.47
,q2 =               2.05
,q3 =              -0.49
,q4 =               1.74
,q5 =               1.92
,q6 =               1.98
,q7 =               1.15
,q8 =               1.81
,q9 =               1.49
,q10  =             1.40
There is no evidence that Cumulative Abnormal Volume varied from Q1 to Q10.

## Advance Sentiment Analysis

Rank the advance measure into quintiles, take the mean of the CAR in different years as example.


|      | q1                     | q2                     | q3                     | q4                     | q5                     | q6                     | q7                     | q8                    | q9                     | q10                    |
|------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----------------------|------------------------|------------------------|
| 1995 | -0.017   | -0.007  | 0.017   | -0.034  | 0.009   | 0.001    | 0.004   | 0.009  | 0.009   | 0.008    |
| 1996 | -0.011  | 0.011   | -0.004  | 0.013   | -0.025   | -0.041   | -0.045   | 0.031  | 0.012    | 0.006   |
| 1997 | -0.041   | -0.041   | 0.038     | 0.005  | -0.037  | -0.012  | 0.031    | 0.015  | -0.029  | 0.006   |
| 1998 | -0.031   | 0.035   | 0.004   | 0.010   | -0.003  | -0.039   | -0.018  | -0.035  | 0.008   | -0.050   |
| 1999 | 0.031   | 0.080    | 0.005   | -0.013   | 0.027   | -0.012  | -0.006 | -0.009 | 0.056   | 0.000  |
| 2000 | -0.064   | -0.025  | -0.074   | 0.079    | 0.010    | 0.028   | -0.027  | 0.018   | -0.044   | 0.014   |
| 2001 | -0.018  | 0.022   | 0.029    | 0.050    | -0.050  | 0.022   | -0.006  | 0.137    | -0.037   | 0.032    |
| 2002 | 0.012   | -0.056   | 0.000  | -0.021   | -0.012   | -0.001  | -0.009  | 0.005 | 0.012   | 0.003   |
| 2003 | -0.023   | -0.000 | -0.002 | 0.007   | 0.039    | -0.010  | 0.000  | -0.016 | 0.004   | 0.049   |
| 2004 | -0.004  | -0.028  | -0.026  | -0.004  | -0.009  | -0.002  | -0.007  | 0.009  | 0.002  | 0.015   |
| 2005 | -0.029    | 0.006   | 0.021   | 0.020    | -0.041   | -0.010  | -0.035   | -0.008  | 0.004    | -0.009   |
| 2006 | -0.006  | 0.014   | -0.002 | 0.013   | -0.022   | -0.021  | 0.004   | 0.001 | -0.002 | 0.021    |
| 2007 | -0.011   | -0.010  | -0.031   | -0.028  | -0.017   | -0.012   | -0.017  | 0.014  | 0.022    | -0.023  |
| 2008 | -0.002  | 0.056     | -0.021  | 0.025   | -0.057  | -0.033   | 0.007    | 0.029  | 0.069    | 0.043   |
| 2009 | -0.016    | -0.030   | 0.017   | -0.011   | -0.026  | 0.029   | -0.032    | 0.042   | 0.024   | 0.031   |
| 2010 | -0.013   | -0.044   | 0.002  | -0.000 | -0.004  | -0.011  | -0.009  | 0.077   | 0.016    | -0.011  |
| 2011 | -0.050   | -0.009   | -0.011  | -0.017   | -0.002 | -0.018  | -0.039   | -0.031  | 0.009   | 0.033    |
| 2012 | -0.001 | -0.037  | -0.028  | 0.021   | 0.001  | 0.006   | 0.013   | 0.004  | 0.014   | 0.021   |
| 2013 | -0.016  | 0.022   | 0.007   | 0.011   | 0.000 | 0.028    | 0.015    | -0.013 | -0.011  | 0.003  |
| 2014 | 0.025     | 0.002  | -0.001 | -0.018   | -0.012  | -0.001 | 0.026   | -0.024 | 0.006   | -0.003 |
| 2015 | 0.017   | 0.009   | 0.008   | 0.003   | -0.008  | -0.013  | 0.007   | 0.009  | 0.004   | 0.003   |
| 2016 | -0.024   | 0.024   | -0.007  | -0.014  | -0.031   | -0.004  | -0.001 | 0.066   | 0.001   | -0.004 |
| 2017 | 0.108    | -0.055   | 0.013   | -0.024  | 0.022   | 0.062    | -0.017   | 0.002 | 0.001  | -0.020  |
| 2018 | 0.003  | -0.039  | -0.024  | -0.036  | -0.007   | -0.003 | -0.023   | 0.011  | 0.001  | 0.022   |

As we can see, in most of thr years the mean of Q10 metrics is larger than mean of Q1 metrics. which implies that positive sentiments can predict positive returns in the future. More precisily, 
The mean of each quantiles over the years are, 
, q1 =              -0.007
, q2 =              -0.004
, q3 =              -0.002
, q4 =               0.001
, q5 =              -0.010
, q6 =              -0.002
, q7 =              -0.007
, q8 =               0.014
, q9 =               0.006
, q10 =             0.008

which show that, the mean of quantiles from Q1 to Q10 cumulative abnormal returns are nearly increasing.

For CAV, the mean of Q1 - Q10 of CAV of window (-5,5) is still unvaried through the quintiles, neither is q75.

below is the q75 of CAV in different quintiles 

|      | q1                 | q2                 | q3                 | q4                  | q5                 | q6                  | q7                 | q8                  | q9                 | q10                |
|------|--------------------|--------------------|--------------------|---------------------|--------------------|---------------------|--------------------|---------------------|--------------------|--------------------|
| 1995 | 0.514 | 3.282 | 3.628  | 6.077   | 4.055 | 3.932   | 2.727 | 2.189  | 4.841  | 4.550  |
| 1996 | 0.357 | 7.136  | 1.976 | 2.713   | 3.950  | 0.240  | 4.967  | 3.364   | 4.604  | 6.328  |
| 1997 | 2.943  | 2.963   | 3.837 | 4.003   | 3.949  | 0.431  | 7.019  | 3.627   | 5.279  | 1.591  |
| 1998 | 4.181  | 1.137 | 1.562  | 5.402   | 5.107  | 2.341   | 4.490  | 2.428    | 3.011 | 2.746 |
| 1999 | 3.583 | 9.286  | 6.989 | 3.594   | 4.497  | 0.441 | 1.331 | 4.660  | 8.261  | 4.415  |
| 2000 | 0.539 | 4.462  | 6.152 | 5.591    | 1.112 | 3.360    | 3.387   | 0.144  | 1.236 | 7.530  |
| 2001 | 4.042  | 3.994 | 3.339  | -0.599 | 0.775 | 1.610  | 5.611  | 5.354   | 1.700 | 4.518  |
| 2002 | 3.143  | 3.342 | 3.297  | 2.053   | 1.629 | 5.323  | 1.797  | 3.672  | 3.303 | 3.987 |
| 2003 | 4.407  | 4.839 | 5.393  | 3.788   | 3.360 | 1.853  | 2.083  | 0.610  | 6.610  | 4.647   |
| 2004 | 7.522  | 5.342  | 6.793   | 6.148   | 5.674 | 4.590   | 5.063  | 5.542   | 1.680 | 2.250 |
| 2005 | 4.574  | 2.032  | 5.599  | 4.650  | 4.805  | 3.341  | 4.935  | 5.342   | 4.823  | 1.812 |
| 2006 | 4.573  | 6.437  | 9.389   | 3.749   | 4.830  | 7.501   | 4.950 | 2.816  | 4.179  | 1.525 |
| 2007 | 6.165  | 5.913   | 6.401  | 6.024   | 5.372  | 6.165   | 5.634  | 4.246   | 2.548   | 6.228   |
| 2008 | 4.542  | 7.716  | 2.561 | 3.723   | 7.233 | 2.643  | 4.422 | 1.219  | 7.452  | 1.632 |
| 2009 | 3.368 | 4.618  | 5.951  | 6.288    | 5.522  | 3.382   | 3.754  | 4.329   | 9.598  | 5.276  |
| 2010 | 5.727  | 3.989  | 5.668  | 2.845  | 4.182  | 6.101   | 4.026  | 4.307   | 6.694  | 6.007 |
| 2011 | 6.507  | 5.329  | 6.986  | 4.044   | 2.973  | 4.655    | 4.345  | 4.244    | 5.577  | 4.220  |
| 2012 | 5.786  | 7.697  | 6.844  | 6.222   | 3.574 | 4.932  | 1.513 | 0.279 | 4.018 | 5.920  |
| 2013 | 6.230  | 3.397  | 11.473 | 5.189  | 4.660   | 5.697   | 5.813  | 0.900  | 3.590  | 2.775 |
| 2014 | 4.714   | 6.611  | 7.746  | 2.896  | 4.881  | 4.747   | 2.462  | 6.407   | 6.633  | 4.496  |
| 2015 | 5.010  | 9.319  | 2.994 | 5.803   | 9.985  | 4.591    | 5.396   | 7.490  | 7.814 | 5.115 |
| 2016 | 7.466  | 6.647  | 4.524   | 7.195   | 5.885  | 5.484   | 3.541 | 1.662   | 3.574 | 4.300  |
| 2017 | 3.918   | 9.301   | 6.104  | 7.810   | 7.150 | 6.793   | 5.423 | 4.606   | 7.065  | 8.981  |
| 2018 | 4.847  | 6.099  | 9.561   | 5.221    | 7.373  | 4.391   | 7.106  | 2.839   | 6.663  | 8.370  |

More precisily, the means of q75 over all the years in different quintiles are, 
,q1 =               4.361
,q2 =               5.454
,q3 =               5.615
,q4 =               4.601
,q5 =               4.689
,q6 =               3.939
,q7 =               4.242
,q8 =               3.428
,q9 =               5.031
,q10  =             4.551
, from which we can see, no evident variance in cumulative abnormal volume.



